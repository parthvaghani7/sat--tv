(this["webpackJsonpsat-tv-frontend"]=this["webpackJsonpsat-tv-frontend"]||[]).push([[0],{134:function(e,t,n){e.exports=n(219)},139:function(e,t,n){},140:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(7),i=n.n(c),r=(n(139),n(29)),l=n(15),s=n(16),u=n(19),h=n(17),p=n(23),m=n(20),b=(n(140),n(224)),d=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={balance:0},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getCurrentBalance()}},{key:"getCurrentBalance",value:function(){var e=this,t=localStorage.getItem("token");fetch("http://localhost:5000/api/balance",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){e.setState({balance:t.balance})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Your Current Balance is ",this.state.balance,"."))}}]),t}(o.a.Component),f=n(227),v=n(228),g=n(40),E=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={amount:0},e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.state.amount,n=localStorage.getItem("token");if(!t.match(/^[0-9]+$/)||t<=0)return alert("enter valid amount");fetch("http://localhost:5000/api/recharge",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({amount:parseInt(t)})}).then((function(e){return e.json()})).then((function(t){f.a.open({message:"Recharge successful."}),e.props.onCancel()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v.a,{onChange:this.handleChange,name:"amount",placeholder:"Enter Amount"}),o.a.createElement(g.a,{style:{marginTop:"10px"},type:"primary",onClick:this.onSubmit},"Recharge"))}}]),t}(o.a.Component),C=n(221),S=n(223),j=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={subscriptions:{}},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getAvailableSubscriptions()}},{key:"getAvailableSubscriptions",value:function(){var e=this,t=localStorage.getItem("token");fetch("http://localhost:5000/api/subscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){e.setState({subscriptions:t.subscriptions})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(C.a,{title:"Available packs for subscription"},o.a.createElement(S.a,{itemLayout:"horizontal",dataSource:this.state.subscriptions&&this.state.subscriptions.Packs,renderItem:function(e){return o.a.createElement(S.a.Item.Meta,{title:e.PackName,description:o.a.createElement("p",null,"Price: ",e.Price," Rs. Channels: ",e.Channels.join(", "))})}})),o.a.createElement(C.a,{className:"marginTop",title:"Available channels for subscription"},o.a.createElement(S.a,{itemLayout:"horizontal",dataSource:this.state.subscriptions&&this.state.subscriptions.Channels,renderItem:function(e){return o.a.createElement(S.a.Item.Meta,{title:e.ChannelName,description:o.a.createElement("p",null,"Price:",e.Price)})}})),o.a.createElement(C.a,{className:"marginTop",title:"Available packs for subscription"},o.a.createElement(S.a,{itemLayout:"horizontal",dataSource:this.state.subscriptions&&this.state.subscriptions.Services,renderItem:function(e){return o.a.createElement(S.a.Item.Meta,{title:e.ServiceName,description:o.a.createElement("p",null,"Price: ",e.Price)})}})))}}]),t}(o.a.Component),O=n(225),k=n(226),y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={pack:"",months:1},e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.state,n=t.pack,a=t.months,o=localStorage.getItem("token");if(!n)return alert("please select one of the packs.");fetch("http://localhost:5000/api/subscribePack",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({packName:n,months:a})}).then((function(e){return e.json()})).then((function(t){f.a.open({message:"Base pack subscribed."}),e.props.onCancel()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",null,"Select Pack:\xa0",o.a.createElement(O.a.Group,{name:"pack",buttonStyle:"solid",onChange:this.handleChange},o.a.createElement(O.a.Button,{value:"Gold"},"Gold"),o.a.createElement(O.a.Button,{value:"Silver"},"Silver"))),o.a.createElement("div",{className:"marginTop"},"Select Months:\xa0",o.a.createElement(k.a,{min:1,name:"months",onChange:function(t){return e.setState({months:t})}})),o.a.createElement(g.a,{className:"marginTop",type:"primary",onClick:this.onSubmit},"Subscribe"))}}]),t}(o.a.Component),A=n(60),T=A.a.Option,N=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState({channels:t})},e.state={channels:[]},e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.state.channels,n=localStorage.getItem("token");if(!t.length)return alert("please select one of the packs.");fetch("http://localhost:5000/api/addChannels",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({channels:t})}).then((function(e){return e.json()})).then((function(t){var n;n=t.error?t.error:"Channel added. Email notification sent successfully.",f.a.open({message:n}),e.props.onCancel()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(A.a,{mode:"multiple",placeholder:"Please select",onChange:this.handleChange,style:{width:"100%"}},o.a.createElement(T,{key:"Discovery"},"Discovery"),o.a.createElement(T,{key:"Net-Geo"},"Net Geo")),o.a.createElement(g.a,{className:"marginTop",type:"primary",onClick:this.onSubmit},"Add Channels"))}}]),t}(o.a.Component),I=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={serviceName:null},e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.state.serviceName,n=localStorage.getItem("token");if(!t)return alert("please select one of the packs.");fetch("http://localhost:5000/api/subscribeService",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({serviceName:t})}).then((function(e){return e.json()})).then((function(t){var n;n=t.error?t.error:"Services added. Email notification sent successfully.",f.a.open({message:n}),e.props.onCancel()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(O.a.Group,{name:"serviceName",buttonStyle:"solid",onChange:this.handleChange},o.a.createElement(O.a.Button,{value:"LearnEnglish"},"LearnEnglish"),o.a.createElement(O.a.Button,{value:"LearnCooking"},"LearnCooking")),o.a.createElement(g.a,{className:"marginTop",type:"primary",onClick:this.onSubmit},"Add Services"))}}]),t}(o.a.Component),B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={subscription:{}},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getCurrentSubscription()}},{key:"getCurrentSubscription",value:function(){var e=this,t=localStorage.getItem("token");fetch("http://localhost:5000/api/subscription",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){e.setState({subscription:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Active Subscription: ",this.state.subscription.activeSubscription?this.state.subscription.activeSubscription:"No Active Subscription","  "),o.a.createElement("p",null,"Active Services: ",this.state.subscription.activeServices?this.state.subscription.activeServices:"No Active Services","  "))}}]),t}(o.a.Component),P=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={enter:!1,email:"",phone:""},e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"getUser",value:function(){var e=this,t=localStorage.getItem("token");fetch("http://localhost:5000/api/user",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){e.setState({email:t.email,phone:t.phone})})).catch((function(e){return console.log(e)}))}},{key:"onSubmit",value:function(){var e=this,t=localStorage.getItem("token"),n=this.state,a=n.email,o=n.phone;a||o||alert("Both fields cannot be empty");var c={};a&&(c.email=a),o&&(c.phone=o),fetch("http://localhost:5000/api/user",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){f.a.open({message:"User updated."}),e.props.onCancel(),t.token&&localStorage.setItem("token",t.token)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v.a,{onChange:this.handleChange,name:"email",placeholder:"Enter Your Email",value:this.state.email}),o.a.createElement(v.a,{className:"marginTop",onChange:this.handleChange,name:"phone",placeholder:"Enter Your Phone Number",value:this.state.phone}),o.a.createElement(g.a,{className:"marginTop",type:"primary",onClick:this.onSubmit},"Update"))}}]),t}(o.a.Component),w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={modal1Visible:!1},n.titles=["View Current Balance of the account"," Recharge Account","View available packs, channels and services","Subscribe to base packs","Add channels to an existing subscription","Subscribe to special services","View current subscription details","Update email and phone number for notifications"],n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"setModal1Visible",value:function(e){e?this.setState({modal1Visible:!0}):(this.props.onCancel(),this.setState({modal1Visible:!1}))}},{key:"componentDidMount",value:function(){this.setState({modal1Visible:!0})}},{key:"getCurrentBalance",value:function(){return"<div><p>your current balance is 100</p></div>"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(b.a,{title:this.titles[this.props.option-1],centered:!0,footer:null,visible:this.state.modal1Visible,onOk:function(){return e.setModal1Visible(!1)},onCancel:function(){return e.setModal1Visible(!1)},maskClosable:!1},1===this.props.option&&o.a.createElement(d,null),2===this.props.option&&o.a.createElement(E,{onCancel:this.props.onCancel}),3===this.props.option&&o.a.createElement(j,null),4===this.props.option&&o.a.createElement(y,{onCancel:this.props.onCancel}),5===this.props.option&&o.a.createElement(N,{onCancel:this.props.onCancel}),6===this.props.option&&o.a.createElement(I,{onCancel:this.props.onCancel}),7===this.props.option&&o.a.createElement(B,null),8===this.props.option&&o.a.createElement(P,{onCancel:this.props.onCancel})))}}]),t}(o.a.Component),M=n(222),V=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).changeOption=function(e){n.setState({openModal:!0,option:e})},n.onCancel=function(){n.setState({openModal:!1})},n.logout=function(){localStorage.removeItem("token"),f.a.open({message:"Logged out Successfully."}),window.location.reload()},n.state={openModal:!1,option:""},n.changeOption=n.changeOption.bind(Object(p.a)(n)),n.onCancel=n.onCancel.bind(Object(p.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("div",null,"Welcome to SatTV"),o.a.createElement("div",{style:{alignContent:"left"}},o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(1)}},"1. View Current Balance of the account")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(2)}},"2. Recharge Account")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(3)}},"3. View available packs, channels and services")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(4)}},"4. Subscribe to base packs")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(5)}},"5. Add channels to an existing subscription")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(6)}},"6. Subscribe to special services")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(7)}},"7. View current subscription details")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){return e.changeOption(8)}},"8. Update email and phone number for notifications")),o.a.createElement(S.a.Item,null,o.a.createElement(M.a.Text,{code:!0,onClick:function(){e.logout()}},"9. Exit")),this.state.openModal&&o.a.createElement(w,{option:this.state.option,onCancel:this.onCancel}))))}}]),t}(o.a.Component),x=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={enter:!1,email:"",phone:""},e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.setState({enter:!0})}},{key:"onSubmit",value:function(){var e=this,t=this.state,n=t.email,a=t.phone;if(!n)return alert("email required");fetch("http://localhost:5000/api/enter",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:n,phone:a})}).then((function(e){return e.json()})).then((function(t){f.a.open({message:"Login successful."}),e.setState({enter:!0}),localStorage.setItem("token",t.token)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},this.state.enter?o.a.createElement(V,null):o.a.createElement("div",null,o.a.createElement("div",null,"Welcome to SatTV"),o.a.createElement(v.a,{onChange:this.handleChange,name:"email",placeholder:"Enter Your Email"}),o.a.createElement(v.a,{onChange:this.handleChange,name:"phone",placeholder:"Enter Your Phone Number"}),o.a.createElement(g.a,{type:"primary",onClick:this.onSubmit},"Enter"))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[134,1,2]]]);
//# sourceMappingURL=main.9ee3a8b7.chunk.js.map